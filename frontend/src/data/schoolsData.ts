// Mapeo de titulaciones por escuela/facultad para cada universidad
export const schoolsMapping = {
  "UV": {
    "RAMA INGENIERIA": [
      "CIENCIA DE DATOS",
      "ING. ELECTRONICA DE TELECOMUNICACION",
      "ING. ELECTRONICA INDUSTRIAL",
      "ING. INFORMATICA",
      "ING. MULTIMEDIA",
      "ING. QUIMICA",
      "ING. TELEMATICA"
    ],
    "RAMA DE CIENCIAS DE LA SALUD": [
      "CIENCIA Y TECNOLOGIA DE LOS ALIMENTOS",
      "ENFERMERIA LA FE",
      "ENFERMERIA BLASCO",
      "FARMACIA",
      "FISIOTERAPIA",
      "LOGOPEDIA",
      "MEDICINA",
      "NUTRICION HUMANA Y DIETETICA",
      "ODONTOLOGIA",
      "OPTICA Y OPTOMETRIA",
      "PODOLOGIA",
      "PSICOLOGIA"
    ],
    "RAMA DE CIENCIAS SOCIALES Y JURÍDICAS": [
      "ADE",
      "CAFD",
      "CIENCIAS POLITICAS",
      "COMUNICACION AUDIOVISUAL",
      "CRIMINOLOGIA",
      "DERECHO",
      "ECONOMIA",
      "EDUCACION SOCIAL",
      "FINANZAS Y CONTABILIDAD",
      "GEOGRAFIA Y MEDIO AMBIENTE",
      "INFORMACION Y DOCUMENTACION",
      "INTELIGENCIA Y ANALITICA DE NEGOCIOS",
      "INTERNATIONAL BUSINESS",
      "BIA",
      "EDUCACION INFANTIL",
      "EDUCACION PRIMARIA",
      "EDUCACION PRIMARIA (ONTINYENT)",
      "PEDAGOGIA",
      "PERIODISMO",
      "RRLL / RRHH",
      "SOCIOLOGIA",
      "TRABAJO SOCIAL",
      "TURISMO"
    ],
    "RAMA DE ARTES Y HUMANIDADES": [
      "ESTUDIOS HISPANICOS",
      "ESTUDIOS INGLESES",
      "FILOLOGIA CATALANA",
      "FILOSOFIA",
      "HISTORIA",
      "HISTORIA DEL ARTE",
      "LENGUAS MODERNAS",
      "TRADUCCION ALEMAN",
      "TRADUCCION FRANCES",
      "TRADUCCION INGLES",
      "FILOSOFIA CLASICA"
    ],
    "DOBLES GRADOS": [
      "ADE + DERECHO (DADE)",
      "DERECHO Y CRIMINOLOGIA",
      "DERECHO Y ECONOMIA",
      "DERECHO Y CIENCIAS POLITICAS",
      "FARMACIA Y NUTRICION",
      "FARMACIA Y MATEMATICAS",
      "QUIMICA E ING. QUIMICA",
      "TURISMO Y ADE",
      "FISICA Y QUIMICA"
    ],
    "RAMA DE CIENCIAS": [
      "BIOLOGIA",
      "BIOLOGIA Y CIENCIAS BIOMEDICAS",
      "BIOTECNOLOGIA",
      "CIENCIAS AMBIENTALES",
      "CIENCIAS GASTRONOMICAS",
      "FISICA",
      "MATEMATICAS",
      "QUIMICA"
    ]
  },
  "UPV": {
    "ETSII - ESCUELA TECNICA SUPERIOR DE LAS INGENIERIAS INDUSTRIALES": [
      "ING. BIOMEDICA",
      "ING. ORGANIZACION INDUSTRIAL",
      "ING. TECNOLOGIAS INDUSTRIALES",
      "ING. QUIMICA",
      "ING. DE LAS ENERGIAS"
    ],
    "ETSINF - ESCUELA TECNICA SUPERIOR DE INGENIERIA INFORMATICA": [
      "CIENCIA DE DATOS",
      "INFORMATICA INDUSTRIAL Y ROBOTICA",
      "ING. INFORMATICA",
      "ADE + ING. INFORMATICA",
      "MATEMATICAS + ING. INFORMATICA"
    ],
    "ETSIT - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE TELECOMUNICACION": [
      "ING. FISICA",
      "ING. TECNOLOGIAS Y SERVICIOS DE TELECO",
      "TECNOLOGIA DIGITAL Y MULTUMEDIA",
      "ADE + TELECO",
      "MATEMATICAS + ADE",
      "MATEMATICAS + ING. CIVIL",
      "MATEMATICAS + ING. INFORMATICA",
      "MATEMATICAS + TELECO"
    ],
    "ETSICCP - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE CAMINOS, CANALES Y PUERTOS": [
      "GESTION DE TRANSPORTE Y LOGISTICA",
      "ING. CIVIL",
      "ING. OBRAS PUBLICAS",
      "MATEMATICAS + ING. CIVIL"
    ],
    "ETSIAMN - ESCUELA TECNICA SUPERIOR DE INGENIERIA AGRONÓMICA Y DEL MEDIO RURAL": [
      "BIOTECNOLOGIA",
      "CIENCIA Y TECNOLOGIA DE LOS ALIMENTOS",
      "ING. AGROALIMENTARIA Y DEL MEDIO RURAL",
      "ING. FORESTAL Y DEL MEDIO NATURAL",
      "ADE + CIENCIA Y TECNOLOGIA DE LOS ALIMENTOS",
      "BIOTEC + ING. AGROALIMENTARIA Y DEL MEDIO RURAL",
      "ING. AGROALIMENTARIA + CIENCIA Y TECNOLOGIA ALIMENTOS",
      "ING. FORESTAL + CIENCIAS AMBIENTALES"
    ],
    "ETSID - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE DISEÑO": [
      "ING. AEROESPACIAL",
      "ING. DISEÑO INDUSTRIAL Y DESARROLLO DE PRODUCTOS",
      "ING. DISEÑO INDUSTRIAL Y DESARROLLO DE PRODUCTOS (ALCOY)",
      "ING. ELECTRICA",
      "ING. ELECTRONICA INDUSTRIAL Y AUTOMATICA",
      "ING. MECANICA"
    ],
    "ETSIE + ETSA - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE EDIFICACION + ARQUITECTURA": [
      "ARQUITECTURA TECNICA",
      "FUNDAMENTOS DE LA ARQUITECTURA",
      "DISEÑO ARQUITECTONICO DE INTERIORES"
    ],
    "ETSIGCP - ESCUELA TECNICA SUPERIOR DE INGENIERIA GEODESICA, CARTOGRAFICA Y TOPOGRAFICA": [
      "ING. GEOMATICA Y TOPOGRAFICA"
    ],
    "FADE - FACULTAD DE ADMINISTRACION Y DIRECCION DE EMPRESAS": [
      "ADE",
      "GESTION Y ADMINISTRACION PUBLICA",
      "ADE + CIENCIA Y TECNOLOGIA DE LOS ALIMENTOS",
      "ADE + ING INFORMATICA",
      "ADE + TELECO",
      "MATEMATICAS + ADE"
    ],
    "BBAA - BELLAS ARTES": [
      "BELLAS ARTES",
      "CONSERVACION Y RESTAURACION DE BIENES CULTURALES",
      "DISEÑO Y TECNOLOGIAS CREATIVAS"
    ]
  },
  "CEU": {
    "CIENCIAS DE LA SALUD": [
      "MEDICINA",
      "ODONTOLOGIA",
      "ENFERMERIA",
      "FISIOTERAPIA",
      "FARMACIA",
      "OPTICA Y OPTOMETRIA",
      "NUTRICION"
    ],
    "CIENCIAS DE LA COMUNICACION": [
      "COMUNICACION AUDIOVISUAL",
      "PERIODISMO",
      "PUBLICIDAD Y RRPP"
    ],
    "HUMANIDADES Y EDUCACION": [
      "EDUCACION INFANTIL",
      "EDUCACION PRIMARIA",
      "EDUCACION INFANTIL + PRIMARIA"
    ],
    "ARQUITECTURA Y DISEÑO": [
      "ARQUITECTURA",
      "DISEÑO INDUSTRIAL"
    ],
    "DERECHO Y POLITICAS": [
      "DERECHO",
      "CIENCIAS POLITICAS"
    ],
    "VETERINARIA": [
      "VETERINARIA"
    ],
    "EMPRESA Y MARKETING": [
      "ADE",
      "MARKETING",
      "ADE + MARKETING",
      "COMUNICIÓN AUDIOVISUAL Y MODA"
    ],
    "GASTRONOMIA": [
      "GASTRONOMIA"
    ]
  },
  "UCV": {
    "FACULTAD DE MEDICINA Y CIENCIAS DE LA SALUD": [
      "FISIOTERAPIA",
      "FISIOTERAPIA EN INGLES",
      "PODOLOGIA",
      "PODOLOGIA + ENFERMERIA",
      "PODOLOGIA + FISIOTERAPIA",
      "ENFERMERIA",
      "ENFERMERIA (ALZIRA)",
      "MEDICINA",
      "NUTRICION",
      "NUTRICION + ENFERMERIA",
      "ODONTOLOGIA",
      "ODONTOLOGIA EN INGLES"
    ],
    "FACULTAD DE CIENCIAS DE LA ACTIVIDAD FISICA Y EL DEPORTE": [
      "CAFD",
      "CAFD + FISIOTERAPIA",
      "CAFD + NUTRICION"
    ],
    "FACULTAD DE VETERINARIA Y CIENCIAS EXPERIMENTALES": [
      "BIOTECNOLOGIA",
      "CIENCIAS DEL MAR",
      "VETERINARIA",
      "CIENCIAS DEL MAR + BIOTECNOLOGIA"
    ],
    "FACULTAD DE CIENCIAS JURÍDICAS, ECONÓMICAS Y SOCIALES": [
      "CRIMINOLOGIA",
      "DERECHO",
      "DERECHO + ADE",
      "DERECHO + ADE BILINGÜE",
      "DERECHO + CRIMINOLOGIA",
      "ADE",
      "ADE BILINGÜE",
      "ECONOMIA (a distancia)",
      "GESTION ECONOMICO FINANCIERA (a distancia)",
      "ADE + ECONOMIA (a distancia)",
      "DISEÑO Y NARRACION DE ANIMACION Y VIDEOJUEGOS",
      "MULTIMEDIA Y ARTES DIGITALES"
    ],
    "FACULTAD DE MAGISTERIO Y CIENCIAS DE LA EDUCACIÓN": [
      "EDUCACIÓN INFANTIL",
      "EDUCACIÓN PRIMARIA",
      "EDUCACIÓN PRIMARIA (ALZIRA)",
      "EDUCACIÓN SOCIAL",
      "PEDAGOGÍA",
      "EDUCACION INFANTIL + PRIMARIA",
      "EDUCACION INFANTIL + PRIMARIA (ALZIRA)",
      "EDUCACION INFANTIL + PRIMARIA PIMM",
      "EDUCACION INFANTIL + PEDAGOGIA",
      "EDUCACION PRIMARIA + CAFD",
      "EDUACION PRIMARIA + PEDAGOGIA",
      "EDUCACION SOCIAL + M.E. PRIMARIA"
    ],
    "FACULTAD DE PSICOLOGIA": [
      "PSICOLOGIA",
      "LOGOPEDIA",
      "PSICOLOGIA (a distancia)",
      "TERAPIA OCUPACIONAL",
      "LOGOPEDIA + EDUCACION PRIMARIA (online)",
      "LOGOPEDIA + PSICOLOGIA",
      "TERAPIA OCUPACIONAL + ENFERMERIA"
    ]
  },
  "EDEM": {
    "EDEM": [
      "ADE",
      "IGE"
    ]
  },
  "ESIC": {
    "ESIC": [
      "DIRECCION Y MANAGEMENT",
      "MARKETING",
      "DIGITAL BUSINESS",
      "COMUNICACION Y PUBLICIDAD / RRPP",
      "INTERNATIONAL BUSINESS"
    ]
  },
  "FLORIDA": {
    "INGENIERIA": [
      "ING. ELECTRONICA INDUSTRIAL Y AUTOMATICA",
      "ING. MECANICA",
      "MECANICA + INDUSTRIAL Y AUTOMATICA"
    ],
    "EDUCACIÓN": [
      "EDUCACION INFANTIL",
      "EDUACION PRIMARIA",
      "EDUACION INFANTIL + PRIMARIA"
    ],
    "EMPRESA": [
      "ADE",
      "LIDERAZGO EMPRENDEDOR E INNOVACION (LEINN)"
    ]
  },
  "UEV": {
    "UEV": [
      "ADE",
      "ADE + MARKETING",
      "BIOTECNOLOGIA",
      "BUSINESS MANAGEMENT",
      "CIENCIA DE DATOS",
      "CRIMINOLOGIA",
      "CRIMINOLOGIA + DERECHO",
      "CRIMINOLOGIA + PSICOLOGIA",
      "DERECHO",
      "DERECHO Y RELACIONES INTERNACIONALES",
      "ENFERMERIA",
      "FISIOTERAPIA",
      "FISICA",
      "ING. ORGANIZACION INDUSTRIAL",
      "ING. ORGANIZACION INDUSTRIAL + ADE",
      "INTERNATIONAL RELATIONS",
      "MARKETING",
      "ODONTOLOGIA",
      "PSICOLOGIA",
      "TOURISM + LEISURE MANAGEMENT",
      "TRADUCCION Y COMUNICACION INTERCULTURAL"
    ]
  },
  "EASD": {
    "EASD": [
      "DISEÑO GRAFICO",
      "DISEÑO DE MODA",
      "DISEÑO DE INTERIORES",
      "DISEÑO DE PRODUCTO",
      "DISEÑO DE PRODUCTO, ITINERARIO DE JOYERIA Y OBJETO",
      "FOTOGRAFIA Y CREACION AUDIOVISUAL",
      "DISEÑO GRAFICO, ITINERARIO DE ILUSTRACION"
    ]
  }
};

// Orden específico de escuelas por universidad
export const schoolOrder = {
  "UV": [
    "RAMA INGENIERIA",
    "RAMA DE CIENCIAS DE LA SALUD",
    "RAMA DE CIENCIAS SOCIALES Y JURÍDICAS",
    "RAMA DE ARTES Y HUMANIDADES",
    "DOBLES GRADOS",
    "RAMA DE CIENCIAS"
  ],
  "UPV": [
    "ETSII - ESCUELA TECNICA SUPERIOR DE LAS INGENIERIAS INDUSTRIALES",
    "ETSINF - ESCUELA TECNICA SUPERIOR DE INGENIERIA INFORMATICA",
    "ETSIT - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE TELECOMUNICACION",
    "ETSICCP - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE CAMINOS, CANALES Y PUERTOS",
    "ETSIAMN - ESCUELA TECNICA SUPERIOR DE INGENIERIA AGRONÓMICA Y DEL MEDIO RURAL",
    "ETSID - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE DISEÑO",
    "ETSIE + ETSA - ESCUELA TECNICA SUPERIOR DE INGENIERIA DE EDIFICACION + ARQUITECTURA",
    "ETSIGCP - ESCUELA TECNICA SUPERIOR DE INGENIERIA GEODESICA, CARTOGRAFICA Y TOPOGRAFICA",
    "FADE - FACULTAD DE ADMINISTRACION Y DIRECCION DE EMPRESAS",
    "BBAA - BELLAS ARTES"
  ],
  "CEU": [
    "CIENCIAS DE LA SALUD",
    "CIENCIAS DE LA COMUNICACION",
    "HUMANIDADES Y EDUCACION",
    "ARQUITECTURA Y DISEÑO",
    "DERECHO Y POLITICAS",
    "VETERINARIA",
    "EMPRESA Y MARKETING",
    "GASTRONOMIA"
  ],
  "UCV": [
    "FACULTAD DE MEDICINA Y CIENCIAS DE LA SALUD",
    "FACULTAD DE CIENCIAS DE LA ACTIVIDAD FISICA Y EL DEPORTE",
    "FACULTAD DE VETERINARIA Y CIENCIAS EXPERIMENTALES",
    "FACULTAD DE CIENCIAS JURÍDICAS, ECONÓMICAS Y SOCIALES",
    "FACULTAD DE MAGISTERIO Y CIENCIAS DE LA EDUCACIÓN",
    "FACULTAD DE PSICOLOGIA"
  ],
  "EDEM": ["EDEM"],
  "ESIC": ["ESIC"],
  "FLORIDA": ["INGENIERIA", "EDUCACIÓN", "EMPRESA"],
  "UEV": ["UEV"],
  "EASD": ["EASD"],
  "UJI": {
    "ESCUELA SUPERIOR DE TECNOLOGIA Y CIENCIAS EXPERIMENTALES": [
      "INGENIERÍA INFORMÁTICA"
    ]
  },
  "UJIEEE": {
    "ESCUELA SUPERIOR DE TECNOLOGIA Y CIENCIAS EXPERIMENTALES": [
      "INGENIERÍA INFORMÁTICA"
    ]
  }
};

// Mapeo de nombres completos a abreviaciones
export const universityNameMapping: Record<string, string> = {
  "Universidad de Valencia": "UV",
  "Universidad de valencia": "UV", // Variante con minúscula
  "Universidad Politécnica de Valencia": "UPV", 
  "Universidad CEU Cardenal Herrera": "CEU",
  "Universidad Católica de Valencia": "UCV",
  "EDEM Escuela de Empresarios": "EDEM",
  "ESIC Business & Marketing School": "ESIC",
  "Florida Universitaria": "FLORIDA",
  "Universidad Europea de Valencia": "UEV",
  "Escuela de Arte y Superior de Diseño": "EASD",
  "Universidad Jaume I": "UJI",
  "Univeeeersidad Jaume I": "UJIEEE",
  // Agregar también las abreviaciones como mapeo directo
  "UV": "UV",
  "UPV": "UPV",
  "CEU": "CEU",
  "UCV": "UCV",
  "EDEM": "EDEM",
  "ESIC": "ESIC",
  "FLORIDA": "FLORIDA",
  "UEV": "UEV",
  "EASD": "EASD",
  "UJI": "UJI",
  "UJIEEE": "UJIEEE"
};

// Función para obtener la escuela de una titulación (CORREGIDA)
export const getSchoolForTitulation = (universidad: string, titulacion: string): string | null => {
  // Mapear el nombre de la universidad a su abreviación
  const universityKey = universityNameMapping[universidad] || universidad;
  const universitySchools = schoolsMapping[universityKey as keyof typeof schoolsMapping];
  
  if (!universitySchools) {
    console.warn(`⚠️ Universidad no encontrada en schoolsMapping: ${universidad} (mapeada como: ${universityKey})`);
    return null;
  }

  for (const [school, titulaciones] of Object.entries(universitySchools)) {
    if (titulaciones.includes(titulacion)) {
      return school;
    }
  }
  
  console.warn(`⚠️ Titulación no encontrada: ${titulacion} en universidad: ${universidad}`);
  return null;
};

// Función para obtener todas las escuelas de una universidad en orden (CORREGIDA)
export const getSchoolsForUniversity = (universidad: string): string[] => {
  // Mapear el nombre de la universidad a su abreviación
  const universityKey = universityNameMapping[universidad] || universidad;
  const schools = schoolOrder[universityKey as keyof typeof schoolOrder] || [];
  
  if (schools.length === 0) {
    console.warn(`⚠️ No se encontraron escuelas para la universidad: ${universidad} (mapeada como: ${universityKey})`);
  }
  
  return schools;
};

// Función para obtener todas las titulaciones de una escuela
export const getTitulationsForSchool = (universidad: string, school: string): string[] => {
  const universitySchools = schoolsMapping[universidad as keyof typeof schoolsMapping];
  if (!universitySchools) return [];
  
  return universitySchools[school as keyof typeof universitySchools] || [];
};